"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}();function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var temps=function(){var t={boardtitle:"Editable board title",lists:[{id:"L0",title:"Stuff to try (this is a list)",cards:[{id:"C0",title:"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},{id:"C1",title:"Familiarize yourself with git + github"}]},{id:"L1",title:"Another Listttttttttttttttttttttttttttttttttttttttttttttttttttt",cards:[{id:"C3",title:"X"},{id:"C4",title:"Y"},{id:"C5",title:"Z"}]},{id:"L2",title:"Bonus Considerations",cards:[{id:"C6",title:"Test Units"},{id:"C7",title:"Make it mobile responsive"},{id:"C8",title:"Create a bookself for the users that stores bookmarked books"},{id:"C9",title:"On search input, display the last 10 search queries."}]}],ids:{listsId:2,cardsId:10}};return{getTitle:function(){return t.boardtitle},get:function(){return t},changeTitle:function(e){t.boardtitle=e},getById:function(e){return t.lists.find(function(t){return t.id===e})},addCardId:function(){t.ids.cardsId++},addListId:function(){t.ids.listsId++}}}(),ListTitleComponent=function(t){function e(t){_classCallCheck(this,e);var i=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.state={input:"",listTitle:i.getById(temps.get().lists,i.props.id).title,tempListTitle:i.getById(temps.get().lists,i.props.id).title,showListTitleEditor:!1},i.handleTitleChange=i.handleTitleChange.bind(i),i.showTitleEditor=i.showTitleEditor.bind(i),i.handleTitleSubmit=i.handleTitleSubmit.bind(i),i}return _inherits(e,React.Component),_createClass(e,[{key:"getById",value:function(t,e){return t.find(function(t){return t.id===e})}},{key:"handleTitleChange",value:function(){this.setState({tempListTitle:event.target.value})}},{key:"showTitleEditor",value:function(){console.log(!this.state.showListTitleEditor),this.setState({showListTitleEditor:!this.state.showListTitleEditor})}},{key:"handleTitleSubmit",value:function(){event.preventDefault(),""!==this.state.tempListTitle.trim()&&(this.getById(temps.get().lists,this.props.id).title=this.state.tempListTitle,this.setState({tempListTitle:this.getById(temps.get().lists,this.props.id).title,showListTitleEditor:!this.state.showListTitleEditor}))}},{key:"render",value:function(){return React.createElement("div",null,React.createElement("p",{className:this.state.showListTitleEditor?"hiddentextarea":"",onClick:this.showTitleEditor},React.createElement("b",null,this.state.tempListTitle)),React.createElement("form",{className:this.state.showListTitleEditor?"":"hiddentextarea",onSubmit:this.handleTitleSubmit},React.createElement("input",{id:"titlechange",onChange:this.handleTitleChange,value:this.state.tempListTitle,type:"text"}),React.createElement("input",{className:"btn btn-sm btn-dark",type:"submit",value:"Change"}),React.createElement("button",{className:"btn btn-sm btn-dark",onClick:this.showTitleEditor},"X")))}}]),e}(),BoardTitleComponent=function(t){function e(t){_classCallCheck(this,e);var i=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.state={boardtitle:i.props.title,tempboardtitle:i.props.title,showboardtitleeditor:!1},i.clickOutsideTarget=i.clickOutsideTarget.bind(i),i.changeBoardTitle=i.changeBoardTitle.bind(i),i.showBoardTitleEditor=i.showBoardTitleEditor.bind(i),i}return _inherits(e,React.Component),_createClass(e,[{key:"clickOutsideTarget",value:function(){var t=this;window.addEventListener("click",function(e){!e.target.matches(".boardtitle")&&t.state.showboardtitleeditor&&(t.setState({showboardtitleeditor:!1}),""!==t.state.tempboardtitle.trim()?(console.log(temps.getTitle()),temps.changeTitle(t.state.tempboardtitle),console.log(temps.getTitle()),t.setState({boardtitle:temps.getTitle(),tempboardtitle:temps.getTitle()})):t.setState({tempboardtitle:t.state.boardtitle}))})}},{key:"changeBoardTitle",value:function(){this.setState({tempboardtitle:event.target.value})}},{key:"showBoardTitleEditor",value:function(){this.setState({showboardtitleeditor:!0}),window.setTimeout(function(){return document.getElementById("boardtitleeditor").select()},0)}},{key:"render",value:function(){return this.clickOutsideTarget(),React.createElement("div",null,React.createElement("p",{className:"whitetext "+(this.state.showboardtitleeditor?"hiddentextarea":"")},React.createElement("b",{onClick:this.showBoardTitleEditor,className:"actlikebutton padding5px boardtitle"},this.state.boardtitle)),React.createElement("p",{className:"whitetext "+(this.state.showboardtitleeditor?"":"hiddentextarea")},React.createElement("input",{id:"boardtitleeditor",className:"boardtitle",type:"text",onChange:this.changeBoardTitle,value:this.state.tempboardtitle})))}}]),e}(),CardsComponent=function(t){function e(t){_classCallCheck(this,e);var i=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));i.state={cards:temps.getById(i.props.id).cards,showActionList:!1,cardTitle:"I am fake"},i.addCard=i.addCard.bind(i),i.copyCards=[],i.deleteCards=[];for(var s=i.state.cards.length,a=0;a<s;a++)i.copyCards.push(i.copyCard.bind(i,a)),i.deleteCards.push(i.deleteCard.bind(i,a));return i}return _inherits(e,React.Component),_createClass(e,[{key:"addCard",value:function(){temps.getById(this.props.id).cards.push({id:"C"+temps.get().ids.cardsId,title:this.state.cardTitle}),temps.addCardId(),this.setState({cards:temps.getById(this.props.id).cards}),this.copyCards.push(this.copyCard.bind(this,this.state.cards.length-1)),this.deleteCards.push(this.deleteCard.bind(this,this.state.cards.length-1))}},{key:"deleteCard",value:function(t){temps.getById(this.props.id).cards.splice(t,1),this.setState({cards:temps.getById(this.props.id).cards})}},{key:"copyCard",value:function(t){var e={id:"C"+temps.get().ids.cardsId,title:temps.getById(this.props.id).cards[t].title+"(1)"};temps.getById(this.props.id).cards.push(e),temps.addCardId(),this.setState({cards:temps.getById(this.props.id).cards}),this.copyCards.push(this.copyCard.bind(this,this.state.cards.length-1)),this.deleteCards.push(this.deleteCard.bind(this,this.state.cards.length-1))}},{key:"render",value:function(){var t=this,e=this.state.cards.map(function(e,i){return React.createElement("li",null,React.createElement("div",null,React.createElement("p",null,e.title+" "+e.id),React.createElement("button",{onClick:t.copyCards[i]},"Copy"),React.createElement("button",{onClick:t.deleteCards[i]},"Delete")))});return React.createElement("div",null,React.createElement("ul",null,e),React.createElement("button",{onClick:this.addCard},"Add card"))}}]),e}(),BoardComponent=function(t){function e(t){_classCallCheck(this,e);var i=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));i.onDragEnd=function(t){if(t.destination){if("column"===t.type){var e=[].concat(_toConsumableArray(i.state.lists)),s=Object.assign({},e[t.source.index]);return e.splice(t.source.index,1),e.splice(t.destination.index,0,s),void i.setState({lists:e})}var a=[].concat(_toConsumableArray(i.state.lists));t.source.droppableId===t.destination.droppableId?t.source.index<t.destination.index?(a[i.findindexById(a,t.source.droppableId)].cards=i.swapArray(a[i.findindexById(a,t.source.droppableId)].cards,t.source.index,t.destination.index),i.setState({lists:a})):t.source.index>t.destination.index&&(a[i.findindexById(a,t.source.droppableId)].cards=i.swapArray2(a[i.findindexById(a,t.source.droppableId)].cards,t.source.index,t.destination.index),i.setState({lists:a})):(a[i.findindexById(a,t.destination.droppableId)].cards.splice(t.destination.index,0,a[i.findindexById(a,t.source.droppableId)].cards[t.source.index]),a[i.findindexById(a,t.source.droppableId)].cards.splice(t.source.index,1),i.setState({lists:a}))}},i.state={lists:[{id:"L0",title:"Stuff to try (this is a list)",cards:[{id:"C0",title:"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",displayaction:!1},{id:"C1",title:"Familiarize yourself with git + github",displayaction:!1}]},{id:"L1",title:"Another Listttttttttttttttttttttttttttttttttttttttttttttttttttt",cards:[{id:"C3",title:"X",displayaction:!1},{id:"C4",title:"Y",displayaction:!1},{id:"C5",title:"Z",displayaction:!1}]},{id:"L2",title:"Bonus Considerations",cards:[{id:"C6",title:"Test Units",displayaction:!1},{id:"C7",title:"Make it mobile responsive",displayaction:!1},{id:"C8",title:"Create a bookself for the users that stores bookmarked books",displayaction:!1},{id:"C9",title:"On search input, display the last 10 search queries.",displayaction:!1}]}],input:"",show:!1,cardshows:[],displays:[],actionlistdisplays:[],actioncarddisplays:[],titleinput:"",cardinput:""},i.temptext="",i.listId=3,i.cardsId=10;var s=i.cardsId;i.clickOutsideTarget=i.clickOutsideTarget.bind(i),i.changeBoardTitle=i.changeBoardTitle.bind(i),i.showBoardTitleEditor=i.showBoardTitleEditor.bind(i),i.cardList=i.cardList.bind(i),i.listOfList=i.listOfList.bind(i),i.addList=i.addList.bind(i),i.displayForm=i.displayForm.bind(i),i.handleChange=i.handleChange.bind(i),i.handleTitleChange=i.handleTitleChange.bind(i),i.hideTitleEditor=i.hideTitleEditor.bind(i),i.ListComonpent=i.ListComonpent.bind(i),i.handleCardChange=i.handleCardChange.bind(i),i.hideCardMenu=i.displayCardMenu.bind(i),i.onDragEnd=i.onDragEnd.bind(i),i.edits=[],i.shows=[],i.addcards=[],i.copycards=[],i.deletecards=[],i.displayCardMenus=[],i.displayActionLists=[],i.listDisplayActionCards=[],i.deletelists=[],i.copylists=[];for(var a=i.state.lists.length,n=0;n<s;n++)i.listDisplayActionCards.push(i.displayActionCard.bind(i,n));for(var d=0;d<a;d++){i.edits.push(i.changeListTitle.bind(i,d)),i.shows.push(i.showTitleEditor.bind(i,d)),i.displayCardMenus.push(i.displayCardMenu.bind(i,d)),i.displayActionLists.push(i.displayActionList.bind(i,d)),i.addcards.push(i.addcard.bind(i,d)),i.deletelists.push(i.deleteList.bind(i,d)),i.copylists.push(i.copyList.bind(i,d));for(var l=i.state.lists[d].cards.length,r=[],o=[],c=0;c<l;c++)r.push(i.copyCard.bind(i,d,c)),o.push(i.deleteCard.bind(i,d,c));i.copycards.push(r),i.deletecards.push(o)}return i}return _inherits(e,React.Component),_createClass(e,[{key:"clickOutsideTarget",value:function(){var t=this;window.addEventListener("click",function(e){!e.target.matches(".actionbutton")&&t.state.actionlistdisplays.includes(!0)&&t.setState({actionlistdisplays:t.falseCardShowsList(t.state.actionlistdisplays.length)})})}},{key:"falseCardShowsList",value:function(t){for(var e=[],i=0;i<t;i++)e[i]=!1;return e}},{key:"hideCardMenu",value:function(){this.setState({cardshows:this.falseCardShowsList(this.state.cardshows.length),cardinput:""})}},{key:"displayCardMenu",value:function(t){var e=this.falseCardShowsList(this.state.cardshows.length);e[t]=!0,this.setState({cardshows:e,cardinput:""}),window.setTimeout(function(){return document.getElementById("addcardid"+t).focus()},0)}},{key:"displayActionCard",value:function(t){console.log(t+"yo!"),this.setState({actioncarddisplays:this.makeListTrue(this.state.actioncarddisplays[t],t,this.state.actioncarddisplays)})}},{key:"makeListTrue",value:function(t,e,i){for(var s=[],a=0;a<i;a++)s[a]=!1;return t||(s[e]=!0),s}},{key:"displayActionList",value:function(t){this.setState({actionlistdisplays:this.makeListTrue(this.state.actionlistdisplays[t],t,this.state.actionlistdisplays.length)})}},{key:"ListComonpent",value:function(t){return React.createElement("div",null,t)}},{key:"cardList",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments[1];if("object"===(void 0===e?"undefined":_typeof(e))&&"function"==typeof e.map){var s=e.map(function(e,s){var a=parseInt(e.id.substr(1));return React.createElement(ReactBeautifulDnd.Draggable,{key:e.id,draggableId:e.id,index:s},function(n){return React.createElement("div",Object.assign({},n.draggableProps,n.dragHandleProps,{ref:n.innerRef}),React.createElement("li",null,React.createElement("div",{className:"white cardtitle"},React.createElement("p",{className:"fixwidth"},e.title+" ("+e.id+")"),React.createElement("div",null,React.createElement("button",{className:"btn btn-sm actionbutton",onClick:t.listDisplayActionCards[a]},"..."),React.createElement("div",{className:"inline actionlist "+(t.state.actioncarddisplays[a]?"WPWWP":"hiddentextarea")},React.createElement("button",{className:"btn actionbutton",onClick:t.deletecards[i][s]},"Delete"),React.createElement("br",null),React.createElement("button",{className:"btn actionbutton",onClick:t.copycards[i][s]},"Copy"))))))})});return React.createElement("ul",null,s)}return[]}},{key:"addcard",value:function(t){if(event.preventDefault(),""!==this.state.cardinput.trim()){var e=[].concat(_toConsumableArray(this.state.lists));e[t].cards.push({id:"C"+this.cardsId,title:this.state.cardinput}),this.setState({id:e[t],cardinput:"",lists:e}),this.cardsId++,this.listDisplayActionCards.push(this.displayActionCard.bind(this,this.cardsId-1)),this.copycards[t].push(this.copyCard.bind(this,t,e[t].cards.length-1)),this.deletecards[t].push(this.deleteCard.bind(this,t,e[t].cards.length-1))}}},{key:"copyCard",value:function(t,e){var i=[].concat(_toConsumableArray(this.state.lists));i[t].cards.push({id:"C"+this.cardsId,title:i[t].cards[e].title,displayaction:i[t].cards[e].displayaction}),this.setState({lists:i}),this.cardsId++,this.listDisplayActionCards.push(this.displayActionCard.bind(this,this.cardsId-1)),this.copycards[t].push(this.copyCard.bind(this,t,i[t].cards.length-1))}},{key:"deleteCard",value:function(t,e){var i=[].concat(_toConsumableArray(this.state.lists));i[t].cards.splice(e,1),this.setState({lists:i})}},{key:"showTitleEditor",value:function(t){var e=[].concat(_toConsumableArray(this.state.displays)).map(function(t){return!1});e[t]=!0,this.setState({displays:e,titleinput:""}),window.setTimeout(function(){document.getElementById("titlechange"+t).focus()},0)}},{key:"hideTitleEditor",value:function(){this.setState({displays:[].concat(_toConsumableArray(this.state.displays)).map(function(t){return!1}),titleinput:""})}},{key:"handleTitleChange",value:function(t){this.setState({titleinput:t.target.value}),console.log(this.state.titleinput)}},{key:"handleCardChange",value:function(t){this.setState({cardinput:t.target.value})}},{key:"handleChange",value:function(t){this.setState({input:t.target.value})}},{key:"changeListTitle",value:function(t){if(event.preventDefault(),""!==this.state.titleinput.trim()){var e=[].concat(_toConsumableArray(this.state.lists)),i=[].concat(_toConsumableArray(this.state.displays)),s=[].concat(_toConsumableArray(e[t].cards));e[t]={id:e[t].id,title:this.state.titleinput,cards:s},i[t]=!1,this.setState({lists:e,displays:i})}}},{key:"displayForm",value:function(){this.setState(function(t){return{show:!t.show}}),window.setTimeout(function(){return document.getElementById("addlistid").focus()},0)}},{key:"swapArray2",value:function(t,e,i){return t.splice(i,0,t[e]),t.splice(e+1,1),t}},{key:"swapArray",value:function(t,e,i){return t.splice(i+1,0,t[e]),t.splice(e,1),t}},{key:"findindexById",value:function(t,e){for(var i=t.length,s=0;s<i;s++)if(t[s].id===e)return s;return-1}},{key:"addList",value:function(){if(event.preventDefault(),""!==this.state.input.trim()){var t=[].concat(_toConsumableArray(this.state.lists));this.listId;t.push({id:"L"+this.listId,title:this.state.input,cards:[]}),this.setState({lists:t,input:""}),this.listId++,this.edits.push(this.changeListTitle.bind(this,t.length-1)),this.shows.push(this.showTitleEditor.bind(this,t.length-1)),this.displayCardMenus.push(this.displayCardMenu.bind(this,t.length-1)),this.addcards.push(this.addcard.bind(this,t.length-1)),this.deletelists.push(this.deleteList.bind(this,t.length-1)),this.displayActionLists.push(this.displayActionList.bind(this,t.length-1)),this.copylists.push(this.copyList.bind(this,t.length-1)),this.copycards.push([]),this.deletecards.push([])}}},{key:"deleteList",value:function(t){var e=[].concat(_toConsumableArray(this.state.lists));e.splice(t,1),this.setState({lists:e})}},{key:"copyList",value:function(t){var e=this,i=[].concat(_toConsumableArray(this.state.lists)),s=i[t].cards.map(function(t){var i={id:"C"+e.cardsId,title:t.title};return e.listDisplayActionCards.push(e.displayActionCard.bind(e,e.cardsId)),e.cardsId++,i}),a={id:"L"+this.listId,title:i[t].title,cards:s};i.push(a),this.setState({lists:i}),console.log(this.listDisplayActionCards),this.listId++,this.edits.push(this.changeListTitle.bind(this,i.length-1)),this.shows.push(this.showTitleEditor.bind(this,i.length-1)),this.displayCardMenus.push(this.displayCardMenu.bind(this,i.length-1)),this.addcards.push(this.addcard.bind(this,i.length-1)),this.deletelists.push(this.deleteList.bind(this,i.length-1)),this.copylists.push(this.copyList.bind(this,i.length-1)),this.displayActionLists.push(this.displayActionList.bind(this,i.length-1));var n=this.state.lists[t].cards.length,d=[],l=[];console.log(n);for(var r=0;r<n;r++)d.push(this.deleteCard.bind(this,i.length-1,r)),l.push(this.copyCard.bind(this,i.length-1,r));this.deletecards.push(d),this.copycards.push(l),console.log(this.deletecards)}},{key:"listOfList",value:function(){var t=this;return this.state.lists.map(function(e,i){return React.createElement(ReactBeautifulDnd.Draggable,{key:e.id+"dropper",draggableId:e.id,index:i},function(s){return React.createElement("div",Object.assign({className:"inlinetable"},s.draggableProps,{ref:s.innerRef}),React.createElement("div",{key:e.id,className:"divclass "},React.createElement("div",{className:"listtitle"},React.createElement("p",Object.assign({},s.dragHandleProps,{className:t.state.displays[i]?"hiddentextarea":"",onClick:t.shows[i]}),React.createElement("b",null,e.title+" ("+e.id+")")),React.createElement("form",{className:t.state.displays[i]?"":"hiddentextarea",onSubmit:t.edits[i]},React.createElement("input",{id:"titlechange"+i,onChange:t.handleTitleChange,value:t.state.titleinput,type:"text"}),React.createElement("input",{className:"btn btn-sm btn-dark",type:"submit",value:"Change"}),React.createElement("button",{className:"btn btn-sm btn-dark",onClick:t.hideTitleEditor},"X")),React.createElement("div",null,React.createElement("button",{className:"btn btn-sm actionbutton",onClick:t.displayActionLists[i]},"..."),React.createElement("div",{className:"actionlist "+(t.state.actionlistdisplays[i]?"":"hiddentextarea")},React.createElement("button",{className:"btn actionbutton",onClick:t.deletelists[i]},"Delete"),React.createElement("br",null),React.createElement("button",{className:"btn actionbutton",onClick:t.copylists[i]},"Copy")))),React.createElement(ReactBeautifulDnd.Droppable,{key:e.id,droppableId:e.id,type:"task"},function(s){return React.createElement("div",Object.assign({className:"Container"},s.droppableProps,{ref:s.innerRef}),t.ListComonpent(t.cardList(e.cards,i)),s.placeholder)}),React.createElement("div",{className:t.state.cardshows[i]?"":"hiddentextarea"},React.createElement("form",{onSubmit:t.addcards[i]},React.createElement("textarea",{maxLength:250,id:"addcardid"+i,className:"w-100",value:t.state.cardinput,onChange:t.handleCardChange,placeholder:"Enter a title for this card"}),React.createElement("br",null),"                            ",React.createElement("input",{className:"btn btn-sm btn-primary",type:"submit",value:"Add card"}),React.createElement("button",{onClick:t.hideCardMenu},"X"))),React.createElement("a",{href:"#",role:"button",onClick:t.displayCardMenus[i],className:t.state.cardshows[i]?"hiddentextarea":""},"Add a card")))})})}},{key:"changeBoardTitle",value:function(){this.setState({boardtitle:event.target.value})}},{key:"showBoardTitleEditor",value:function(){this.setState({showboardtitleeditor:!0}),window.setTimeout(function(){return document.getElementById("boardtitleeditor").select()},0)}},{key:"render",value:function(){var t=this;return this.clickOutsideTarget(),React.createElement(ReactBeautifulDnd.DragDropContext,{onDragEnd:this.onDragEnd},React.createElement("div",{className:"h-100"},React.createElement(BoardTitleComponent,{title:temps.getTitle()}),React.createElement("div",{className:"inlinetable"},React.createElement(ReactBeautifulDnd.Droppable,{droppableId:"all-col",direction:"horizontal",type:"column"},function(e){return React.createElement("div",Object.assign({className:"inlinetable"},e.droppableProps,{ref:e.innerRef}),t.listOfList(),{...e.placeholder})}),React.createElement("div",{className:"divclass"},React.createElement("button",{className:"btn btn-sm btn-light "+(this.state.show?"hiddentextarea":""),onClick:this.displayForm},"Add another List"),React.createElement("form",{id:"on0",className:"small "+(this.state.show?"":"hiddentextarea"),onSubmit:this.addList},React.createElement("p",null,React.createElement("input",{id:"addlistid",onChange:this.handleChange,value:this.state.input,type:"text"})),React.createElement("p",null,React.createElement("input",{type:"submit",value:"Add list"}),React.createElement("button",{onClick:this.displayForm},"X")))))))}}]),e}();ReactDOM.render(React.createElement(BoardComponent,null),document.getElementById("board"));
